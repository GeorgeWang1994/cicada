# cicada

## 架构

整体架构为

1. 探针向kafka发送数据
2. event从kafka中读取数据，并且将数据写入到Clickhouse中，同时也将数据写入到告警的缓存中
3. 告警组件从后台拉取告警策略信息，同时从缓存中读取数据，同时开启合并操作（将多个事件合并到一起），将数据经过告警策略后，发给对应的provider
4. portal后台组件从clickhouse中读取事件数据展示出来
5. 用户可以在后端配置告警策略信息，具体数据存储在mysql中

可能存在的问题
1. 条件告警怎么办
2. 组件心跳怎么办


## 组件

* agentd: 专门用来上报数据用的探针
* judge：根据告警策略判断是否需要报警
* ev：具备事件转发的功能，并且将数据存储到数据库中
* alarm：负责将数据告警出去，会提供多个provider
* portal：面向用户的查询界面，提供数据的查询，以及对告警策略的配置
